{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/LIM017-burger-queen/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/mac/Documents/LIM017-burger-queen/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/mac/Documents/LIM017-burger-queen/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mac/Documents/LIM017-burger-queen/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{collection,getDocs,updateDoc,doc,where,query}from\"firebase/firestore\";import{db}from\"../../firebase/connection.js\";import\"./style.css\";import Swal from'sweetalert2';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Chef=function Chef(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setTotal=_useState2[1];var usersCollectionRef=collection(db,\"ordenes\");var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(query(usersCollectionRef,where(\"state\",\"<\",2)));case 2:data=_context.sent;setTotal(data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref.apply(this,arguments);};}();useEffect(function(){getUsers();},[]);/* ------------ Funcion estados del boton ------------ */var buttonState=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(user){var userState;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(user);userState=doc(db,\"ordenes\",user.id);_context2.t0=user.state;_context2.next=_context2.t0===0?5:_context2.t0===1?16:27;break;case 5:_context2.prev=5;_context2.next=8;return updateDoc(userState,{state:1});case 8:console.log(\"amarillo\");getUsers();_context2.next=15;break;case 12:_context2.prev=12;_context2.t1=_context2[\"catch\"](5);console.log(_context2.t1);case 15:return _context2.abrupt(\"break\",27);case 16:_context2.prev=16;_context2.next=19;return updateDoc(userState,{state:2});case 19:getUsers();_context2.next=25;break;case 22:_context2.prev=22;_context2.t2=_context2[\"catch\"](16);console.log(_context2.t2);case 25:Swal.fire({position:'top-center',icon:'success',title:'Pedido enviado a mesero',showConfirmButton:false,timer:1500});return _context2.abrupt(\"break\",27);case 27:case\"end\":return _context2.stop();}}},_callee2,null,[[5,12],[16,22]]);}));return function buttonState(_x){return _ref2.apply(this,arguments);};}();/* --------------------------------------- */return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://firebasestorage.googleapis.com/v0/b/burger-queen-d0e74.appspot.com/o/logo-bq.PNG?alt=media&token=ff5fc092-8e35-45fc-ab81-6b4a4a7efa45\",alt:\"logoBurgerQueen\",className:\"logoBurgerQueen\"})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"containerNavbarChef\",children:[/*#__PURE__*/_jsx(\"text\",{className:\"stateOrdersTitle\",children:\"ESTADO DE PEDIDOS\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stateOrders\",children:[/*#__PURE__*/_jsx(\"text\",{className:\"redBall\",children:\"\\uD83D\\uDD34 Pendiente\"}),/*#__PURE__*/_jsx(\"text\",{className:\"greenBall\",children:\"\\uD83D\\uDFE0 En proceso\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"containerOrders\",children:users.map(function(user,id){return/*#__PURE__*/_jsxs(\"div\",{className:'containerOrderChef '+(user.state==0?'containerOrderChef':user.state==1?'containerOrderChef-preparing':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:'numberTable '+(user.state==0?'numberTable':user.state==1?'numberTable-preparing':''),children:[\"N\\xFAmero de mesa: \",user.numberClient]}),/*#__PURE__*/_jsx(\"div\",{className:\"listOrderChef\",children:user.productCar.map(function(product,id){return/*#__PURE__*/_jsxs(\"div\",{className:\"productOrderChef\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"quantifyOrder\",children:[\"(\",product.quantity,\")\"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"productOrder\",children:product.product})]},id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"listCommentChef\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"commentsTitleStyle\",children:[\"COMENTARIO:\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"commentsTextStyle\",children:user.comentOrder})]}),/*#__PURE__*/_jsx(\"button\",{className:'buttonStyle '+(user.state==0?'buttonStyle':user.state==1?'buttonStyle-preparing':''),onClick:function onClick(){return buttonState(user);},children:user.state?'preparando':'pendiente'})]},id);})})]});};export default Chef;","map":{"version":3,"names":["React","useEffect","useState","collection","getDocs","updateDoc","doc","where","query","db","Swal","Chef","users","setTotal","usersCollectionRef","getUsers","data","docs","map","id","buttonState","user","console","log","userState","state","fire","position","icon","title","showConfirmButton","timer","numberClient","productCar","product","quantity","comentOrder"],"sources":["/Users/mac/Documents/LIM017-burger-queen/src/components/Chef/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {collection, getDocs, updateDoc,doc, where, query} from \"firebase/firestore\";\nimport { db } from \"../../firebase/connection.js\";\nimport \"./style.css\";\nimport Swal from 'sweetalert2'\n\nexport const Chef = () => {\n  const [users, setTotal] = useState([]);\n  const usersCollectionRef = collection(db, \"ordenes\");  \n\n  const getUsers = async () => {\n   const data = await getDocs(query(usersCollectionRef, where(\"state\", \"<\", 2)));\n    setTotal(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));   \n  };\n\n  useEffect(() => {\n    getUsers();\n  }, []);\n  \n/* ------------ Funcion estados del boton ------------ */\nconst buttonState = async (user) => {\n  console.log(user)\n  const userState = doc(db, \"ordenes\", user.id);  \n\n  switch(user.state){\n    case 0 :\n      try{\n        await updateDoc(userState, {\n          state: 1,\n        })\n        console.log(\"amarillo\")\n        getUsers();\n      } catch (error) {\n        console.log(error)\n      }    \n    break;\n    case 1 :\n      try{\n        await updateDoc(userState, {\n          state: 2,\n          \n        })\n        getUsers();\n      } catch (error) {\n        console.log(error)\n      }   \n      Swal.fire({\n        position: 'top-center',\n        icon: 'success',\n        title: 'Pedido enviado a mesero',\n        showConfirmButton: false,\n        timer: 1500\n      }) \n    break;\n  }\n};\n/* --------------------------------------- */\n  return (\n    <div>\n      <header className=\"header\">\n        <img\n          src=\"https://firebasestorage.googleapis.com/v0/b/burger-queen-d0e74.appspot.com/o/logo-bq.PNG?alt=media&token=ff5fc092-8e35-45fc-ab81-6b4a4a7efa45\"\n          alt=\"logoBurgerQueen\"\n          className=\"logoBurgerQueen\"\n        />\n      </header>\n      <ul className=\"containerNavbarChef\">\n        <text className=\"stateOrdersTitle\">ESTADO DE PEDIDOS</text>\n        <div className=\"stateOrders\">\n          <text className=\"redBall\">ðŸ”´ Pendiente</text>\n          <text className=\"greenBall\">ðŸŸ  En proceso</text>\n        </div>\n      </ul>\n\n      <div className=\"containerOrders\">\n      {users.map((user, id) => {\n        return (\n            <div className={'containerOrderChef '+ (user.state ==0 ? 'containerOrderChef' :user.state ==1 ?'containerOrderChef-preparing': '')}\n            key={id}>\n              <div className={'numberTable '+ (user.state ==0 ? 'numberTable' :user.state ==1 ?'numberTable-preparing': '')}>\n                NÃºmero de mesa: {user.numberClient}\n              </div>\n\n              <div className=\"listOrderChef\">\n                {user.productCar.map((product, id) => {\n                  return (\n                    <div className=\"productOrderChef\" key={id}>\n                      <h1 className=\"quantifyOrder\">({product.quantity})</h1>\n                      <h1 className=\"productOrder\">{product.product}</h1>\n                    </div>\n                  );\n                })}\n              </div>\n\n              <div className=\"listCommentChef\">\n                <h1 className=\"commentsTitleStyle\">\n                  COMENTARIO:<br></br>\n                </h1>\n                <div className=\"commentsTextStyle\">{user.comentOrder}</div>\n              </div>\n              <button className={'buttonStyle '+ (user.state ==0 ? 'buttonStyle':user.state ==1 ?'buttonStyle-preparing': '')}\n               onClick={ ()=> buttonState(user)}> \n              {user.state ? 'preparando':'pendiente'} \n              </button>\n            </div> \n        );\n      })}\n      </div>\n    </div>\n  );\n};\nexport default Chef;\n"],"mappings":"ugBAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAAQC,UAAR,CAAoBC,OAApB,CAA6BC,SAA7B,CAAuCC,GAAvC,CAA4CC,KAA5C,CAAmDC,KAAnD,KAA+D,oBAA/D,CACA,OAASC,EAAT,KAAmB,8BAAnB,CACA,MAAO,aAAP,CACA,MAAOC,KAAP,KAAiB,aAAjB,C,wFAEA,MAAO,IAAMC,KAAI,CAAG,QAAPA,KAAO,EAAM,CACxB,cAA0BT,QAAQ,CAAC,EAAD,CAAlC,wCAAOU,KAAP,eAAcC,QAAd,eACA,GAAMC,mBAAkB,CAAGX,UAAU,CAACM,EAAD,CAAK,SAAL,CAArC,CAEA,GAAMM,SAAQ,4FAAG,oKACGX,QAAO,CAACI,KAAK,CAACM,kBAAD,CAAqBP,KAAK,CAAC,OAAD,CAAU,GAAV,CAAe,CAAf,CAA1B,CAAN,CADV,QACVS,IADU,eAEfH,QAAQ,CAACG,IAAI,CAACC,IAAL,CAAUC,GAAV,CAAc,SAACZ,GAAD,wCAAeA,GAAG,CAACU,IAAJ,EAAf,MAA2BG,EAAE,CAAEb,GAAG,CAACa,EAAnC,IAAd,CAAD,CAAR,CAFe,sDAAH,kBAARJ,SAAQ,0CAAd,CAKAd,SAAS,CAAC,UAAM,CACdc,QAAQ,GACT,CAFQ,CAEN,EAFM,CAAT,CAIF,yDACA,GAAMK,YAAW,6FAAG,kBAAOC,IAAP,sIAClBC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACMG,SAFY,CAEAlB,GAAG,CAACG,EAAD,CAAK,SAAL,CAAgBY,IAAI,CAACF,EAArB,CAFH,cAIXE,IAAI,CAACI,KAJM,+BAKX,CALW,kBAgBX,CAhBW,4DAONpB,UAAS,CAACmB,SAAD,CAAY,CACzBC,KAAK,CAAE,CADkB,CAAZ,CAPH,QAUZH,OAAO,CAACC,GAAR,CAAY,UAAZ,EACAR,QAAQ,GAXI,qFAaZO,OAAO,CAACC,GAAR,eAbY,8FAkBNlB,UAAS,CAACmB,SAAD,CAAY,CACzBC,KAAK,CAAE,CADkB,CAAZ,CAlBH,SAsBZV,QAAQ,GAtBI,sFAwBZO,OAAO,CAACC,GAAR,eAxBY,QA0Bdb,IAAI,CAACgB,IAAL,CAAU,CACRC,QAAQ,CAAE,YADF,CAERC,IAAI,CAAE,SAFE,CAGRC,KAAK,CAAE,yBAHC,CAIRC,iBAAiB,CAAE,KAJX,CAKRC,KAAK,CAAE,IALC,CAAV,EA1Bc,mHAAH,kBAAXX,YAAW,6CAAjB,CAoCA,6CACE,mBACE,oCACE,eAAQ,SAAS,CAAC,QAAlB,uBACE,YACE,GAAG,CAAC,+IADN,CAEE,GAAG,CAAC,iBAFN,CAGE,SAAS,CAAC,iBAHZ,EADF,EADF,cAQE,YAAI,SAAS,CAAC,qBAAd,wBACE,aAAM,SAAS,CAAC,kBAAhB,+BADF,cAEE,aAAK,SAAS,CAAC,aAAf,wBACE,aAAM,SAAS,CAAC,SAAhB,oCADF,cAEE,aAAM,SAAS,CAAC,WAAhB,qCAFF,GAFF,GARF,cAgBE,YAAK,SAAS,CAAC,iBAAf,UACCR,KAAK,CAACM,GAAN,CAAU,SAACG,IAAD,CAAOF,EAAP,CAAc,CACvB,mBACI,aAAK,SAAS,CAAE,uBAAwBE,IAAI,CAACI,KAAL,EAAa,CAAb,CAAiB,oBAAjB,CAAuCJ,IAAI,CAACI,KAAL,EAAa,CAAb,CAAgB,8BAAhB,CAAgD,EAA/G,CAAhB,wBAEE,aAAK,SAAS,CAAE,gBAAiBJ,IAAI,CAACI,KAAL,EAAa,CAAb,CAAiB,aAAjB,CAAgCJ,IAAI,CAACI,KAAL,EAAa,CAAb,CAAgB,uBAAhB,CAAyC,EAA1F,CAAhB,iCACmBJ,IAAI,CAACW,YADxB,GAFF,cAME,YAAK,SAAS,CAAC,eAAf,UACGX,IAAI,CAACY,UAAL,CAAgBf,GAAhB,CAAoB,SAACgB,OAAD,CAAUf,EAAV,CAAiB,CACpC,mBACE,aAAK,SAAS,CAAC,kBAAf,wBACE,YAAI,SAAS,CAAC,eAAd,eAAgCe,OAAO,CAACC,QAAxC,OADF,cAEE,WAAI,SAAS,CAAC,cAAd,UAA8BD,OAAO,CAACA,OAAtC,EAFF,GAAuCf,EAAvC,CADF,CAMD,CAPA,CADH,EANF,cAiBE,aAAK,SAAS,CAAC,iBAAf,wBACE,YAAI,SAAS,CAAC,oBAAd,sCACa,aADb,GADF,cAIE,YAAK,SAAS,CAAC,mBAAf,UAAoCE,IAAI,CAACe,WAAzC,EAJF,GAjBF,cAuBE,eAAQ,SAAS,CAAE,gBAAiBf,IAAI,CAACI,KAAL,EAAa,CAAb,CAAiB,aAAjB,CAA+BJ,IAAI,CAACI,KAAL,EAAa,CAAb,CAAgB,uBAAhB,CAAyC,EAAzF,CAAnB,CACC,OAAO,CAAG,yBAAKL,YAAW,CAACC,IAAD,CAAhB,EADX,UAECA,IAAI,CAACI,KAAL,CAAa,YAAb,CAA0B,WAF3B,EAvBF,GACKN,EADL,CADJ,CA8BD,CA/BA,CADD,EAhBF,GADF,CAqDD,CAxGM,CAyGP,cAAeR,KAAf"},"metadata":{},"sourceType":"module"}