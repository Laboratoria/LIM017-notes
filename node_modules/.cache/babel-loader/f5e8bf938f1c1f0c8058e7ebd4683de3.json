{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/LIM017-burger-queen/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/mac/Documents/LIM017-burger-queen/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/mac/Documents/LIM017-burger-queen/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mac/Documents/LIM017-burger-queen/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import\"./styleOrders.css\";import{collection,getDocs,query,where,doc,updateDoc}from\"firebase/firestore\";import{db}from\"../../../firebase/connection.js\";import{Link}from\"react-router-dom\";import Swal from'sweetalert2';/*---------------- VISTA PEDIDOS LISTOS ----------------*/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var OrdersReady=function OrdersReady(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cookedOrders=_useState2[0],setTotal=_useState2[1];var ordersCollections=collection(db,\"ordenes\");var deliverOrders=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var orders;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(query(ordersCollections,where(\"state\",\">=\",2),where(\"state\",\"<\",3)));case 2:orders=_context.sent;setTotal(orders.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function deliverOrders(){return _ref.apply(this,arguments);};}();useEffect(function(){deliverOrders();},[]);/* ------------ Funcion estados del boton ------------ */var buttonStates=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(orderReady){var userState;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(orderReady);userState=doc(db,\"ordenes\",orderReady.id);_context2.t0=orderReady.state;_context2.next=_context2.t0===2?5:17;break;case 5:_context2.prev=5;_context2.next=8;return updateDoc(userState,{state:3});case 8:console.log(\"red\");deliverOrders();_context2.next=15;break;case 12:_context2.prev=12;_context2.t1=_context2[\"catch\"](5);console.log(_context2.t1);case 15:Swal.fire({position:'top-center',icon:'success',title:'Pedido entregado a mesa',showConfirmButton:false,timer:1500});return _context2.abrupt(\"break\",17);case 17:case\"end\":return _context2.stop();}}},_callee2,null,[[5,12]]);}));return function buttonStates(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://firebasestorage.googleapis.com/v0/b/burger-queen-d0e74.appspot.com/o/logo-bq.PNG?alt=media&token=ff5fc092-8e35-45fc-ab81-6b4a4a7efa45\",alt:\"logoBurgerQueen\",className:\"logoBurgerQueen\"})}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:\"buttonBreakfast\",to:\"/mesero\",children:\"DESAYUNO\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:\"buttonMenu\",to:\"/menu\",children:\"MEN\\xDA\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:\"buttonOrders\",to:\"/pedidos\",children:\"PEDIDOS LISTOS\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"containerOrders\",children:cookedOrders.map(function(orderReady,id){return/*#__PURE__*/_jsxs(\"div\",{className:'containerOrdersReady '+(orderReady.state==0?'containerOrdersReady':orderReady.state==3?'':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:'numberTableOrders '+(orderReady.state==0?'numberTableOrders':orderReady.state==3?'':''),children:[\"Cliente: \",orderReady.nameClient,/*#__PURE__*/_jsx(\"br\",{}),\"Numero de mesa: \",orderReady.numberClient]}),/*#__PURE__*/_jsx(\"div\",{className:\"listOrdersReady\",children:orderReady.productCar.map(function(product,id){return/*#__PURE__*/_jsxs(\"div\",{className:\"productOrdersReady\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"quantifyOrders\",children:[\"(\",product.quantity,\")\"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"productOrders\",children:product.product})]},id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"listCommentOrdersReady\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"commentsTitleStyleOrders\",children:[\"COMENTARIO:\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"commentsTextStyleOrders\",children:orderReady.comentOrder})]}),/*#__PURE__*/_jsx(\"button\",{className:'buttonStyleOrders '+(orderReady.state==0?'buttonStyleOrders':orderReady.state==3?'':''),onClick:function onClick(){return buttonStates(orderReady);},children:orderReady.state?'entregar':'pendiente'})]},id);})})]});};export default OrdersReady;","map":{"version":3,"names":["React","useEffect","useState","collection","getDocs","query","where","doc","updateDoc","db","Link","Swal","OrdersReady","cookedOrders","setTotal","ordersCollections","deliverOrders","orders","docs","map","data","id","buttonStates","orderReady","console","log","userState","state","fire","position","icon","title","showConfirmButton","timer","nameClient","numberClient","productCar","product","quantity","comentOrder"],"sources":["/Users/mac/Documents/LIM017-burger-queen/src/components/Mesero/Orders/OrdersReady.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./styleOrders.css\";\nimport { collection, getDocs, query, where,doc,updateDoc } from \"firebase/firestore\";\nimport { db } from \"../../../firebase/connection.js\";\nimport { Link } from \"react-router-dom\";\nimport Swal from 'sweetalert2'\n\n/*---------------- VISTA PEDIDOS LISTOS ----------------*/\nexport const OrdersReady = () =>{\n\n  const [cookedOrders, setTotal] = useState([]);\n  const ordersCollections = collection(db, \"ordenes\");  \n\n  const deliverOrders = async () => {\n    const orders = await getDocs(query(ordersCollections, where(\"state\" ,\">=\",2),where(\"state\" ,\"<\",3)))\n    setTotal(orders.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\n  };\n\n  useEffect(() => {\n    deliverOrders();\n  }, []);\n\n  /* ------------ Funcion estados del boton ------------ */\nconst buttonStates = async (orderReady) => {\n    console.log(orderReady)  \n   const userState = doc(db, \"ordenes\", orderReady.id); \n\n    switch(orderReady.state){\n      case 2 :\n        try{\n          await updateDoc(userState, {\n            state:3\n          })\n          console.log(\"red\")\n          deliverOrders();\n        } catch (error) {\n          console.log(error)\n        }      \n        Swal.fire({\n          position: 'top-center',\n          icon: 'success',\n          title: 'Pedido entregado a mesa',\n          showConfirmButton: false,\n          timer: 1500\n        })  \n     break;\n    }\n  };\n\n  return (\n     <div>\n      <div>\n        <header className=\"header\">\n          <img\n            src=\"https://firebasestorage.googleapis.com/v0/b/burger-queen-d0e74.appspot.com/o/logo-bq.PNG?alt=media&token=ff5fc092-8e35-45fc-ab81-6b4a4a7efa45\"\n            alt=\"logoBurgerQueen\"\n            className=\"logoBurgerQueen\"\n          />\n        </header>\n\n        <ul>\n          <li>\n            <Link className=\"buttonBreakfast\" to=\"/mesero\">DESAYUNO</Link>\n          </li>\n          <li>\n            <Link className=\"buttonMenu\" to=\"/menu\">MENÃš</Link> \n          </li>\n          <li>\n            <Link className=\"buttonOrders\" to=\"/pedidos\">PEDIDOS LISTOS</Link>\n          </li>\n        </ul>\n      </div>\n\n       <div className=\"containerOrders\">\n        {cookedOrders.map((orderReady, id) => {\n            return (\n            <div className={'containerOrdersReady '+ (orderReady.state ==0 ? 'containerOrdersReady':orderReady.state ==3 ?'': '')}\n            key={id}>\n              <div className={'numberTableOrders '+ (orderReady.state ==0 ? 'numberTableOrders':orderReady.state ==3 ?'': '')}>\n                Cliente: {orderReady.nameClient} \n                <br/>\n                Numero de mesa: {orderReady.numberClient}\n              </div>\n\n              <div className=\"listOrdersReady\">\n                {orderReady.productCar.map((product, id) => {\n                  return (\n                    <div className=\"productOrdersReady\" key={id}>\n                      <h1 className=\"quantifyOrders\">({product.quantity})</h1>\n                      <h1 className=\"productOrders\">{product.product}</h1>\n                    </div>\n                  );\n                })}\n              </div>\n\n              <div className=\"listCommentOrdersReady\">\n                <h1 className=\"commentsTitleStyleOrders\">\n                  COMENTARIO:<br></br>\n                </h1>\n                <div className=\"commentsTextStyleOrders\">{orderReady.comentOrder}</div>\n              </div>\n              <button className={'buttonStyleOrders '+ (orderReady.state ==0 ? 'buttonStyleOrders':orderReady.state ==3?'': '')}\n               onClick={ ()=> buttonStates(orderReady)}> \n              {orderReady.state ? 'entregar':'pendiente'} \n              </button>\n            </div> \n        );\n      })}\n      </div>\n\n    </div>\n  );\n};\nexport default OrdersReady;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}